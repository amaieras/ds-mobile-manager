<p-growl [(value)]="msgs"></p-growl>
<div class="content">
    <div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none">
      <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
      <input #gb  pInputText size="50" placeholder="Cauta peste tot">
    </div>

    <p-dataTable [value]="repairsPF|async" [editable]="true" [paginator]="true" rows="10" [globalFilter]="gb" [responsive]="true"
                 (onEditComplete)="updateField($event)" [rowStyleClass]="disabledRow" >
      <p-header>
        <div style="text-align:left">
          <p-multiSelect [options]="columnOptions" [(ngModel)]="cols"></p-multiSelect>
        </div>
        Reparatii pentru clientii PF
      </p-header>



      <p-column *ngFor="let column of cols" [field]="column.field" [header]="column.header" [filter]="column.filter" [editable]="column.editable" [sortable]="column.sortable" >

        <ng-container *ngIf="column.field == 'addedDate'">
          <ng-template let-col let-row="rowData" pTemplate="body">
            <span [style.color]="row[col.field]">{{row[col.field] | date:"dd-MM-yyyy HH:mm"}}</span>
          </ng-template>
        </ng-container>
        <ng-container *ngIf="column.field == 'appointmentDate'">
          <ng-template let-col let-row="rowData" pTemplate="body">
            {{row[col.field] | date:"dd-MM-yyyy HH:mm"}}
          </ng-template>
          <ng-template let-col let-row="rowData" pTemplate="editor">
            <p-calendar [(ngModel)]="row[appointmentDate]"
                        [ngModelOptions]="{standalone: true}"
                        appendTo="body"
                        [defaultDate]="defaultDate" [showTime]="true" [showIcon]="true" readonlyInput="readonlyInput"
                        [stepMinute]="15">
              <p-footer>
                <div class="ui-datepicker-buttonbar ui-widget-header ng-tns-c8-2">
                  <div class="ui-g">
                    <div class="ui-g-6 ui-g-offset-6">
                      <button class="ng-tns-c8-2 ui-button-secondary ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" pbutton ng-reflect-ng-class="ui-button-secondary" ng-reflect-label="Ok" type="button" (click)="updateAppointmentDate(row, row[appointmentDate])">
                      <span class="ui-button-text ui-clickable">Salveaza</span>
                    </button>
                    </div>
                  </div>
                </div>
              </p-footer>
            </p-calendar>
          </ng-template>
        </ng-container>
        <ng-container *ngIf="column.field == 'tested'" >
          <ng-template  let-col let-row="rowData" pTemplate="editor">
            <p-dropdown  [(ngModel)]="row[col.field]" [options]="testingValues" [autoWidth]="false" [style]="{'width':'100%'}" appendTo="body" (onChange)="updateTestedItem(row)"></p-dropdown>
          </ng-template>
        </ng-container>
        <ng-container *ngIf="column.field === 'deliveredDate'" >
          <ng-template let-col let-row="rowData" pTemplate="body">
            <span *ngIf="row.isRepaired">{{row[col.field] | date:"dd-MM-yyyy HH:mm"}}</span>
          </ng-template>
        </ng-container>
        <ng-container *ngIf="column.field === 'isRepaired'">
          <ng-template pTemplate="body" let-col let-row="rowData">
            <p-checkbox [(ngModel)]="row[col.field]" binary="true" (onChange)="updateCheckedItem(row)"></p-checkbox>
          </ng-template>
        </ng-container>

      </p-column>
    </p-dataTable>
</div>






<!--<p-column field="addedDate" header="Data si ora introducerii" [sortable]="true" [filter]="true">-->
<!--<ng-template let-col let-addedDate="rowData" pTemplate="body">-->
<!--<span [style.color]="addedDate[col.field]">{{addedDate[col.field] | date:"dd-MM-yyyy HH:mm"}}</span>-->
<!--</ng-template>-->
<!--</p-column>-->
<!--<p-column field="lastname" header="Nume" [sortable]="true" [filter]="true" [editable]="true"></p-column>-->
<!--<p-column field="firstname" header="Prenume" [sortable]="true" [filter]="true" [editable]="true"></p-column>-->
<!--<p-column field="email" header="Email" [sortable]="true" [filter]="true" [editable]="true"></p-column>-->
<!--<p-column field="firm" header="Firma" [sortable]="true" [filter]="true" [editable]="true"></p-column>-->
<!--<p-column field="phone" header="Numar telefon" [sortable]="true" [filter]="true" [editable]="true"></p-column>-->
<!--<p-column field="phoneModel" header="Model Telefon" [sortable]="true" [filter]="true" [editable]="true"></p-column>-->
<!--<p-column field="problem" header="Solicitare/Problema" [sortable]="true" [filter]="true" [editable]="true"></p-column>-->
<!--<p-column field="imei" header="IMEI" [sortable]="true" [filter]="true" [editable]="true"></p-column>-->
<!--<p-column field="priceOffer" header="Oferta pret" [sortable]="true" [filter]="true" [editable]="true"></p-column>-->
<!--<p-column field="appointmentDate" header="Data si ora programarii" [sortable]="true" [filter]="true" [editable]="true">-->
<!--<ng-template let-col let-appointment="rowData" pTemplate="body">-->
<!--<span [style.color]="appointment[col.field]">{{appointment[col.field] | date:"dd-MM-yyyy HH:mm"}}</span>-->
<!--</ng-template>-->
<!--<ng-template  let-col let-appointmentDate="rowData" pTemplate="editor">-->
<!--<p-calendar [(ngModel)]="appointmentDate[appointmentDate]" appendTo="body" (onSelect)="updateAppointmentDate(appointmentDate, appointmentDate[appointmentDate])"></p-calendar>-->
<!--</ng-template>-->
<!--</p-column>-->
<!--<p-column field="tested" header="Testat?" [sortable]="true" [filter]="true" [editable]="true">-->
<!--<ng-template let-col let-tested="rowData" pTemplate="editor">-->
<!--<p-dropdown  [(ngModel)]="tested[col.field]" [options]="testingValues" [autoWidth]="false" [style]="{'width':'100%'}" appendTo="body" (onChange)="updateTestedItem(tested)"></p-dropdown>-->
<!--</ng-template>-->
<!--</p-column>-->
<!--<p-column field="aboutUs" header="Cum a aflat de noi" [sortable]="true" [filter]="true" [editable]="true"></p-column>-->
<!--<p-column field="deliveredDate" header="Data Predarii" [filter]="true"  [editable]="true">-->
<!--<ng-template  let-col let-deliveredDate="rowData" pTemplate="body" >-->
<!--<span *ngIf="deliveredDate.isRepaired">{{deliveredDate[col.field] | date:"dd-MM-yyyy HH:mm"}}</span>-->
<!--</ng-template>-->
<!--<ng-template  let-col let-deliveredDate="rowData" pTemplate="editor">-->
<!--<p-calendar [(ngModel)]="deliveredDate[deliveredDate]" appendTo="body" (onSelect)="updateDeliveryDate(deliveredDate, deliveredDate[deliveredDate])"></p-calendar>-->
<!--</ng-template>-->
<!--</p-column>-->
<!--<p-column field="isRepaired" header="Finalizat ?" [filter]="true">-->
<!--<ng-template pTemplate="body" let-col let-isRepaired="rowData">-->
<!--<p-checkbox [(ngModel)]="isRepaired[col.field]" binary="true" (onChange)="updateCheckedItem( isRepaired)"></p-checkbox>-->
<!--</ng-template>-->
<!--</p-column>-->
